<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Gallery</title>

<style>
:root{
  --bg:#f6f8ff;
  --card:#ffffff;
  --text:#334155;
  --muted:#94a3b8;
  --line:#e5e7eb;

  /* Single pastel color */
  --accent:#93c5fd;        /* pastel blue */
  --accent-2:#bfdbfe;      /* lighter */
  --accent-text:#0b3a75;

  --radius:18px;
  --shadow: 0 10px 25px rgba(15, 23, 42, .08);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:
    radial-gradient(900px 450px at 12% 12%, rgba(147,197,253,.35), transparent 60%),
    radial-gradient(900px 450px at 88% 20%, rgba(191,219,254,.35), transparent 60%),
    var(--bg);
  color:var(--text);
}

.container{max-width:1100px;margin:24px auto;padding:0 16px}
h1{margin:0;font-size:28px}
h2{margin:0 0 10px;font-size:16px}
.muted{color:var(--muted)}
.small{font-size:12px}

.header{
  display:flex;align-items:flex-end;justify-content:space-between;
  gap:12px;flex-wrap:wrap;margin-bottom:10px
}

.tabs{display:flex;gap:8px}
.tab{
  user-select:none;
  padding:10px 18px;border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.9);
  cursor:pointer;font-weight:900;
}
.tab.active{
  border:1px solid rgba(147,197,253,.65);
  background: rgba(147,197,253,.35);
  color: var(--accent-text);
}

.card{
  background:var(--card);
  border:1px solid rgba(148,163,184,.25);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:var(--shadow);
  margin:14px 0;
}

.row{display:flex;gap:10px;flex-wrap:wrap;align-items:end}
.field{display:flex;flex-direction:column;gap:6px;min-width:220px}
.field.grow{flex:1;min-width:260px}
label{font-size:12px;color:var(--muted)}

input,select{
  padding:12px 14px;border-radius:14px;
  border:1px solid var(--line);
  background:#fff;
  font-size:14px;
}

button{
  padding:12px 16px;border-radius:14px;border:1px solid rgba(147,197,253,.75);
  background: rgba(147,197,253,.35);
  color: var(--accent-text);
  font-weight:950;
  cursor:pointer;
}
button.secondary{
  background: rgba(191,219,254,.35);
  border:1px solid rgba(147,197,253,.55);
  color: var(--accent-text);
}
button.danger{
  background: rgba(147,197,253,.18);
  border:1px solid rgba(147,197,253,.55);
  color: #7a1d1d;
}
button:disabled{opacity:.6;cursor:not-allowed}

.panel.hidden{display:none}

/* Folder view cards */
.foldersGrid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
  gap:14px;
}
.folderCard{
  border-radius:16px;
  overflow:hidden;
  background:#fff;
  border:1px solid var(--line);
  cursor:pointer;
  transition:transform .08s ease;
}
.folderCard:hover{transform:scale(1.01)}
.folderThumb{
  height:140px;
  background: rgba(191,219,254,.25);
  display:flex;align-items:center;justify-content:center;
  overflow:hidden;
}
.folderThumb img{width:100%;height:100%;object-fit:cover;display:block}
.folderThumb .ph{color:var(--muted);font-weight:900}
.folderMeta{
  padding:12px;
  display:flex;align-items:center;justify-content:space-between;gap:10px;
}
.folderName{font-weight:950;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.folderCount{
  font-size:12px;color:var(--muted);
  padding:4px 10px;border-radius:999px;border:1px solid var(--line);
  background:#f8fafc;
}
.folderRight{display:flex;gap:8px;align-items:center}

/* Dropzone */
.dropzone{
  margin-top:12px;
  padding:22px;
  border-radius:18px;
  border:2px dashed rgba(147,197,253,.85);
  text-align:center;
  background: rgba(191,219,254,.18);
}
.dropzone.drag{
  background: rgba(147,197,253,.18);
  border-color: rgba(96,165,250,.95);
}

/* Gallery */
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:14px;margin-top:12px;
}
.thumb{
  border-radius:16px;
  overflow:hidden;
  background:#fff;
  border:1px solid var(--line);
}
.thumb img{width:100%;height:160px;object-fit:cover;display:block}
.meta{padding:12px;display:flex;flex-direction:column;gap:8px}
.metaTop{display:flex;justify-content:space-between;gap:10px;align-items:center}
.fileName{font-weight:950;font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.badge{
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#f8fafc;
  color:var(--muted);
  white-space:nowrap;
}
.tags{display:flex;gap:6px;flex-wrap:wrap}
.tag{
  font-size:11px;padding:4px 10px;border-radius:999px;
  background: rgba(191,219,254,.35);
  border:1px solid rgba(147,197,253,.55);
  color: var(--accent-text);
}
.actions{display:flex;gap:8px}
.actions a, .actions button{
  flex:1;
  text-align:center;
  padding:10px;
  border-radius:12px;
  border:1px solid rgba(147,197,253,.55);
  background: rgba(191,219,254,.25);
  color: var(--accent-text);
  font-weight:950;
  text-decoration:none;
}
.actions button{cursor:pointer}

/* Status box */
.status{
  border-radius:14px;
  border:1px solid rgba(147,197,253,.45);
  background: rgba(191,219,254,.18);
  padding:12px;
  white-space:pre-wrap;
}
.status.ok{border-color:rgba(34,197,94,.35); background:rgba(34,197,94,.08)}
.status.err{border-color:rgba(239,68,68,.35); background:rgba(239,68,68,.08)}
</style>
</head>

<body>
<div class="container">

  <header class="header">
    <div>
      <h1>Pastel Gallery</h1>
      <div class="muted small">GitHub Pages • เก็บรูปใน LocalStorage (ฝั่งเครื่อง) • อัปโหลด + ลบโฟลเดอร์/รูป</div>
    </div>

    <div class="tabs">
      <div class="tab active" id="tabSearch" role="button" tabindex="0">Search</div>
      <div class="tab" id="tabUpload" role="button" tabindex="0">Upload</div>
    </div>
  </header>

  <section class="card">
    <h2>Status</h2>
    <div id="statusBox" class="status">พร้อมใช้งาน</div>
    <div class="muted small" id="storageInfo">—</div>
  </section>

  <!-- Folder View -->
  <section class="card" id="folderViewCard">
    <div class="row" style="justify-content:space-between;align-items:center">
      <h2 style="margin:0">Folders</h2>
      <div class="row" style="margin:0">
        <button class="secondary" id="btnShowAll">Show All</button>
        <button class="danger" id="btnResetAll" title="ลบข้อมูลทั้งหมดในเครื่องนี้">Reset All</button>
      </div>
    </div>
    <div id="foldersGrid" class="foldersGrid"></div>
    <div id="foldersEmpty" class="muted">ยังไม่มีโฟลเดอร์ — ไปที่แท็บ Upload เพื่อสร้างโฟลเดอร์</div>
  </section>

  <!-- Search -->
  <section class="panel" id="panelSearch">
    <div class="card">
      <h2>ค้นหา / ฟิลเตอร์</h2>
      <div class="row">
        <div class="field">
          <label>Folder</label>
          <select id="searchFolder"></select>
        </div>
        <div class="field grow">
          <label>Search (ชื่อไฟล์)</label>
          <input id="searchText" placeholder="เช่น trip, dc2, run..." />
        </div>
        <div class="field grow">
          <label>Tags (คั่นด้วย , )</label>
          <input id="searchTags" placeholder="hokkaido, snow, dc2" />
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button class="secondary" id="btnClearSearch">Clear</button>
        </div>
      </div>
      <div class="muted small" id="resultInfo">—</div>
    </div>
  </section>

  <!-- Upload -->
  <section class="panel hidden" id="panelUpload">
    <div class="card">
      <h2>สร้างโฟลเดอร์</h2>
      <div class="row">
        <div class="field grow">
          <label>New folder name</label>
          <input id="newFolderName" placeholder="เช่น Trip-Hokkaido / DC2 / Running" />
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button id="btnCreateFolder">Create</button>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>อัปโหลดรูป</h2>
      <div class="row">
        <div class="field">
          <label>Upload folder</label>
          <select id="uploadFolder"></select>
        </div>
        <div class="field grow">
          <label>Tags (ใช้กับรูปที่อัปโหลดรอบนี้)</label>
          <input id="uploadTags" placeholder="invoice, snow, family (คั่นด้วย , )" />
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button class="secondary" id="btnChoose">Choose images</button>
          <!-- IMPORTANT: accept + multiple + not disabled -->
          <input type="file" id="fileInput" accept="image/*" multiple hidden />
        </div>
      </div>

      <div id="dropzone" class="dropzone">
        <div style="font-weight:950">ลากไฟล์รูปมาวางที่นี่ (Drag & Drop)</div>
        <div class="muted small">iPhone อาจไม่รองรับ Drag&Drop → ใช้ Choose images</div>
      </div>
    </div>
  </section>

  <!-- Gallery -->
  <section class="card">
    <h2>Gallery</h2>
    <div id="gallery" class="gallery"></div>
    <div id="emptyState" class="muted">ยังไม่มีรูป — ไปที่แท็บ Upload เพื่อเพิ่มรูป</div>
  </section>

</div>

<script>
/* =========================
   Robust single-file gallery (LocalStorage)
========================= */
const STORAGE_KEY = "pastel_gallery_v4";
const $ = (id) => document.getElementById(id);

function setStatus(msg, type="") {
  const box = $("statusBox");
  box.className = "status" + (type ? " " + type : "");
  box.textContent = msg;
  // Also log for debugging
  console.log("[STATUS]", msg);
}

function uid() {
  return Date.now().toString(16) + "_" + Math.random().toString(16).slice(2);
}

function normalizeTags(str) {
  return String(str || "")
    .split(",")
    .map(t => t.trim())
    .filter(Boolean)
    .map(t => t.toLowerCase());
}

function sanitizeFolderName(name) {
  return String(name || "")
    .trim()
    .replace(/[\/\\]/g, "-")
    .replace(/(\.\.)/g, "")
    .replace(/[^\wก-๙\s.-]/g, "")
    .trim();
}

function safeJsonParse(raw, fallback) {
  try { return JSON.parse(raw); } catch { return fallback; }
}

let state = loadState();

function loadState() {
  const raw = localStorage.getItem(STORAGE_KEY);
  const parsed = raw ? safeJsonParse(raw, null) : null;
  if (!parsed || !parsed.folders) return { folders: { "Default": [] } };
  if (!parsed.folders["Default"]) parsed.folders["Default"] = [];
  return parsed;
}

function saveState() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  updateStorageInfo();
}

function updateStorageInfo() {
  // rough size
  const raw = localStorage.getItem(STORAGE_KEY) || "";
  const bytes = new Blob([raw]).size;
  const mb = (bytes / (1024*1024)).toFixed(2);
  $("storageInfo").textContent = `Storage used (this gallery key): ~${mb} MB (LocalStorage limit มัก ~5MB ต่อโดเมน)`;
}

function getFolderNames() {
  return Object.keys(state.folders).sort((a,b)=>a.localeCompare(b));
}

/* =========================
   Tabs
========================= */
function setActiveTab(tab) {
  const isSearch = tab === "search";
  $("tabSearch").classList.toggle("active", isSearch);
  $("tabUpload").classList.toggle("active", !isSearch);
  $("panelSearch").classList.toggle("hidden", !isSearch);
  $("panelUpload").classList.toggle("hidden", isSearch);
}
$("tabSearch").addEventListener("click", () => setActiveTab("search"));
$("tabUpload").addEventListener("click", () => setActiveTab("upload"));

/* =========================
   Folder selects + folder view
========================= */
function refillFolderSelects() {
  const folders = getFolderNames();

  const up = $("uploadFolder");
  up.innerHTML = "";
  folders.forEach(f => {
    const o=document.createElement("option");
    o.value=f; o.textContent=f;
    up.appendChild(o);
  });
  if (!up.value && folders.length) up.value = folders[0];

  const sf = $("searchFolder");
  const current = sf.value;
  sf.innerHTML = "";
  const allOpt = document.createElement("option");
  allOpt.value="__ALL__";
  allOpt.textContent="All folders";
  sf.appendChild(allOpt);

  folders.forEach(f => {
    const o=document.createElement("option");
    o.value=f; o.textContent=f;
    sf.appendChild(o);
  });

  if ([...sf.options].some(o=>o.value===current)) sf.value=current;
  else sf.value="__ALL__";
}

function getFolderCover(folderName){
  const imgs = state.folders[folderName] || [];
  if (!imgs.length) return null;
  let newest = imgs[0];
  for (const x of imgs) if ((x.createdAt||0) > (newest.createdAt||0)) newest = x;
  return newest.dataUrl || null;
}

function renderFolders(){
  const grid = $("foldersGrid");
  const empty = $("foldersEmpty");
  const folders = getFolderNames();
  grid.innerHTML = "";

  if (!folders.length) {
    empty.style.display = "block";
    return;
  }
  empty.style.display = "none";

  for (const f of folders) {
    const count = (state.folders[f] || []).length;
    const cover = getFolderCover(f);

    const card = document.createElement("div");
    card.className = "folderCard";

    const thumb = document.createElement("div");
    thumb.className = "folderThumb";
    if (cover) {
      const img=document.createElement("img");
      img.src=cover; img.alt=f; img.loading="lazy";
      thumb.appendChild(img);
    } else {
      const ph=document.createElement("div");
      ph.className="ph";
      ph.textContent="No image";
      thumb.appendChild(ph);
    }

    const meta = document.createElement("div");
    meta.className = "folderMeta";

    const name = document.createElement("div");
    name.className = "folderName";
    name.textContent = f;
    name.title = f;

    const right = document.createElement("div");
    right.className = "folderRight";

    const badge = document.createElement("div");
    badge.className = "folderCount";
    badge.textContent = `${count}`;

    const del = document.createElement("button");
    del.className = "danger";
    del.style.padding = "8px 10px";
    del.style.borderRadius = "12px";
    del.style.fontSize = "12px";
    del.textContent = "Delete";
    del.addEventListener("click", (e) => {
      e.stopPropagation();
      deleteFolder(f);
    });

    right.appendChild(badge);
    right.appendChild(del);

    meta.appendChild(name);
    meta.appendChild(right);

    card.appendChild(thumb);
    card.appendChild(meta);

    card.addEventListener("click", () => {
      $("searchFolder").value = f;
      $("searchText").value = "";
      $("searchTags").value = "";
      setActiveTab("search");
      renderGallery();
      window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
    });

    grid.appendChild(card);
  }
}

function deleteFolder(folder){
  if (folder === "Default") {
    alert('ไม่อนุญาตให้ลบโฟลเดอร์ "Default"');
    return;
  }
  if (!confirm(`ลบโฟลเดอร์ "${folder}" และรูปทั้งหมดในโฟลเดอร์นี้?`)) return;
  delete state.folders[folder];
  saveState();
  refillFolderSelects();
  renderFolders();
  renderGallery();
  setStatus(`ลบโฟลเดอร์ "${folder}" แล้ว`, "ok");
}

/* =========================
   Create folder
========================= */
$("btnCreateFolder").addEventListener("click", () => {
  const name = sanitizeFolderName($("newFolderName").value);
  if (!name) return setStatus("กรุณาใส่ชื่อโฟลเดอร์", "err");
  if (state.folders[name]) return setStatus("มีโฟลเดอร์นี้อยู่แล้ว", "err");

  state.folders[name] = [];
  saveState();
  $("newFolderName").value = "";
  refillFolderSelects();
  renderFolders();
  setStatus(`สร้างโฟลเดอร์สำเร็จ: ${name}`, "ok");
});

/* =========================
   Image processing (compress)
   - reduces LocalStorage pressure
========================= */
function readFileAsDataURL(file) {
  return new Promise((resolve, reject) => {
    const r = new FileReader();
    r.onload = () => resolve(r.result);
    r.onerror = () => reject(new Error("FileReader failed"));
    r.readAsDataURL(file);
  });
}

async function compressDataUrl(dataUrl, maxW=1600, maxH=1600, quality=0.82) {
  // If browser can't use canvas for some reason, return original
  try {
    const img = new Image();
    img.decoding = "async";
    img.src = dataUrl;
    await new Promise((res, rej) => { img.onload = res; img.onerror = () => rej(new Error("Image load failed")); });

    let { width:w, height:h } = img;
    const scale = Math.min(maxW / w, maxH / h, 1);
    const nw = Math.round(w * scale);
    const nh = Math.round(h * scale);

    const canvas = document.createElement("canvas");
    canvas.width = nw;
    canvas.height = nh;
    const ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, nw, nh);

    // try jpeg for size
    const out = canvas.toDataURL("image/jpeg", quality);
    return out;
  } catch {
    return dataUrl;
  }
}

/* =========================
   Upload handling
========================= */
async function uploadFiles(files) {
  try {
    const folder = $("uploadFolder").value || "Default";
    if (!state.folders[folder]) state.folders[folder] = [];

    const tagList = normalizeTags($("uploadTags").value);
    const arr = [...files].filter(f => f && f.type && f.type.startsWith("image/"));
    if (!arr.length) return setStatus("ไม่พบไฟล์รูปภาพ", "err");

    setStatus(`กำลังอัปโหลด ${arr.length} ไฟล์...`);

    for (const file of arr) {
      const raw = await readFileAsDataURL(file);
      const compact = await compressDataUrl(raw);

      // store
      state.folders[folder].push({
        id: uid(),
        name: file.name || "image",
        dataUrl: compact,
        tags: tagList,
        createdAt: Date.now()
      });

      // save per image so you don't lose everything on quota error
      try {
        saveState();
      } catch (e) {
        // Quota exceeded
        // rollback last push
        state.folders[folder].pop();
        throw new Error("Storage เต็ม (LocalStorage quota exceeded). ลองอัปโหลดรูปขนาดเล็กลง หรือ Reset All");
      }
    }

    refillFolderSelects();
    renderFolders();
    renderGallery();
    setStatus(`อัปโหลดสำเร็จ: ${arr.length} ไฟล์ → ${folder}`, "ok");
  } catch (e) {
    setStatus(`อัปโหลดไม่สำเร็จ: ${e.message || e}`, "err");
  }
}

/* Choose button + file input */
$("btnChoose").addEventListener("click", () => {
  const fi = $("fileInput");
  fi.value = ""; // reset so same file can be chosen again
  fi.click();
});
$("fileInput").addEventListener("change", (e) => {
  if (e.target.files && e.target.files.length) uploadFiles(e.target.files);
});

/* Drag & Drop (desktop) */
const dz = $("dropzone");
dz.addEventListener("dragover", (e) => { e.preventDefault(); dz.classList.add("drag"); });
dz.addEventListener("dragleave", () => dz.classList.remove("drag"));
dz.addEventListener("drop", (e) => {
  e.preventDefault();
  dz.classList.remove("drag");
  if (e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files.length) uploadFiles(e.dataTransfer.files);
});

/* =========================
   Search + Gallery + delete image
========================= */
function getAllImages() {
  const out = [];
  for (const folder of getFolderNames()) {
    for (const img of (state.folders[folder] || [])) out.push({ ...img, folder });
  }
  out.sort((a,b)=>(b.createdAt||0)-(a.createdAt||0));
  return out;
}

function applyFilters(images) {
  const folder = $("searchFolder").value;
  const text = ($("searchText").value || "").trim().toLowerCase();
  const tags = normalizeTags($("searchTags").value);

  return images.filter(img => {
    if (folder !== "__ALL__" && img.folder !== folder) return false;
    if (text) {
      const name = (img.name || "").toLowerCase();
      if (!name.includes(text)) return false;
    }
    if (tags.length) {
      const imgTags = (img.tags || []).map(t => String(t).toLowerCase());
      for (const t of tags) if (!imgTags.includes(t)) return false;
    }
    return true;
  });
}

function deleteImage(folder, id) {
  if (!confirm("ลบรูปนี้ออกจากเครื่องนี้?")) return;
  state.folders[folder] = (state.folders[folder] || []).filter(x => x.id !== id);
  saveState();
  renderFolders();
  renderGallery();
  setStatus("ลบรูปแล้ว", "ok");
}

function renderGallery() {
  const gallery = $("gallery");
  const empty = $("emptyState");
  const all = getAllImages();
  const filtered = applyFilters(all);

  gallery.innerHTML = "";

  if (!filtered.length) {
    empty.style.display = "block";
    $("resultInfo").textContent = all.length ? "ไม่พบรูปตามเงื่อนไข" : "—";
    return;
  }
  empty.style.display = "none";
  $("resultInfo").textContent = `แสดง ${filtered.length} จากทั้งหมด ${all.length} รูป`;

  for (const img of filtered) {
    const card = document.createElement("div");
    card.className = "thumb";

    const imageEl = document.createElement("img");
    imageEl.src = img.dataUrl;
    imageEl.alt = img.name || "image";
    imageEl.loading = "lazy";

    const meta = document.createElement("div");
    meta.className = "meta";

    const top = document.createElement("div");
    top.className = "metaTop";

    const name = document.createElement("div");
    name.className = "fileName";
    name.textContent = img.name || "(no name)";
    name.title = img.name || "";

    const badge = document.createElement("div");
    badge.className = "badge";
    badge.textContent = img.folder;

    top.appendChild(name);
    top.appendChild(badge);

    const tagsWrap = document.createElement("div");
    tagsWrap.className = "tags";
    (img.tags || []).forEach(t => {
      const tag = document.createElement("span");
      tag.className = "tag";
      tag.textContent = t;
      tag.addEventListener("click", () => {
        const current = new Set(normalizeTags($("searchTags").value));
        current.add(String(t).toLowerCase());
        $("searchTags").value = Array.from(current).join(", ");
        setActiveTab("search");
        renderGallery();
      });
      tagsWrap.appendChild(tag);
    });

    const actions = document.createElement("div");
    actions.className = "actions";

    const dl = document.createElement("a");
    dl.href = img.dataUrl;
    dl.download = img.name || "image";
    dl.textContent = "Download";

    const del = document.createElement("button");
    del.textContent = "Delete";
    del.addEventListener("click", () => deleteImage(img.folder, img.id));

    actions.appendChild(dl);
    actions.appendChild(del);

    meta.appendChild(top);
    if ((img.tags || []).length) meta.appendChild(tagsWrap);
    meta.appendChild(actions);

    card.appendChild(imageEl);
    card.appendChild(meta);
    gallery.appendChild(card);
  }
}

/* Search events */
$("searchFolder").addEventListener("change", renderGallery);
$("searchText").addEventListener("input", renderGallery);
$("searchTags").addEventListener("input", renderGallery);
$("btnClearSearch").addEventListener("click", () => {
  $("searchFolder").value="__ALL__";
  $("searchText").value="";
  $("searchTags").value="";
  renderGallery();
  setStatus("ล้างฟิลเตอร์แล้ว", "ok");
});

/* Buttons */
$("btnShowAll").addEventListener("click", () => {
  $("searchFolder").value="__ALL__";
  $("searchText").value="";
  $("searchTags").value="";
  setActiveTab("search");
  renderGallery();
  setStatus("แสดงรูปทั้งหมดแล้ว", "ok");
});

$("btnResetAll").addEventListener("click", () => {
  if (!confirm("ลบข้อมูลทั้งหมด (โฟลเดอร์+รูป) ในเครื่องนี้?")) return;
  localStorage.removeItem(STORAGE_KEY);
  state = { folders: { "Default": [] } };
  saveState();
  refillFolderSelects();
  renderFolders();
  renderGallery();
  setStatus("รีเซ็ตเรียบร้อย", "ok");
});

/* Init */
(function init(){
  updateStorageInfo();
  refillFolderSelects();
  renderFolders();
  renderGallery();
  setActiveTab("search");
  setStatus("พร้อมใช้งาน (ถ้าอัปโหลดไม่ผ่าน ดูข้อความใน Status ได้เลย)", "ok");
})();
</script>
</body>
</html>
